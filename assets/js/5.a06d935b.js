(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{208:function(a,e,s){"use strict";s.r(e);var t=s(0),n=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("如果还未了解过 Docker, 建议先阅读上一篇文章 "),s("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzIyMDQyNTc3OA==&mid=2247483767&idx=1&sn=fbf540263518d02ad6fb05d4d9ba1801&chksm=97cd7a2aa0baf33c9c8476654733d5ae136d12daa2524d2d711483921146bd563e9ca54cec79&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[a._v("初识 Docker"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("hr"),a._v(" "),s("p",[a._v("仓库（Repository）就是存放镜像的地方。类似于 "),s("code",[a._v("Node")]),a._v(" 的 "),s("code",[a._v("npm")]),a._v("； "),s("code",[a._v("Python")]),a._v(" 的 "),s("code",[a._v("PyPi")]),a._v("。")]),a._v(" "),s("p",[a._v("注册服务器（Registry）的概念比较容易与仓库混淆。实际上注册服务器是用来管理仓库的服务器，一个服务器上可以存在多个仓库，而每个仓库下可以有多个镜像。")]),a._v(" "),s("p",[a._v("例如对于仓库地址 "),s("code",[a._v("hub.dockerpool.com/nginx")]),a._v(" 来说，"),s("code",[a._v("hub.dockerpool.com")]),a._v(" 是注册服务器的地址，"),s("code",[a._v("nginx")]),a._v(" 是仓库名。")]),a._v(" "),s("h2",{attrs:{id:"docker-hub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-hub","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker Hub")]),a._v(" "),s("p",[a._v("目前 Docker 官方维护的一个公共仓库，大部分需求我们都可以从 Docker Hub 中直接下载镜像来实现。")]),a._v(" "),s("h3",{attrs:{id:"注册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册","aria-hidden":"true"}},[a._v("#")]),a._v(" 注册")]),a._v(" "),s("p",[a._v("我们可以在 https://hub.docker.com/ 注册一个 Docker 账号。")]),a._v(" "),s("h3",{attrs:{id:"登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登录","aria-hidden":"true"}},[a._v("#")]),a._v(" 登录")]),a._v(" "),s("p",[a._v("可以通过 "),s("code",[a._v("docker login")]),a._v(" 命令在终端输入用户名及密码来完成 Docker Hub 的登录。")]),a._v(" "),s("p",[a._v("我们也可以通过 "),s("code",[a._v("docker logout")]),a._v(" 退出登录。")]),a._v(" "),s("h3",{attrs:{id:"镜像分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像分类","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像分类")]),a._v(" "),s("p",[a._v("通过上一篇文章可以知道，使用 "),s("code",[a._v("docker search")]),a._v(" 搜索镜像时，搜索出来可以看到下面的镜像列表。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker search nginx\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nnginx                             Official build of Nginx.                        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12036")]),a._v("               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njwilder/nginx-proxy               Automated Nginx reverse proxy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" docker con…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1671")]),a._v("                                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nricharvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("742")]),a._v("                                     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nlinuxserver/nginx                 An Nginx container, brought to you by LinuxS…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("78")]),a._v("\nbitnami/nginx                     Bitnami nginx Docker Image                      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("71")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ntiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmp…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("56")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nnginxdemos/hello                  NGINX webserver that serves a simple page co…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("28")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njlesage/nginx-proxy-manager       Docker container "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" Nginx Proxy Manager        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njc21/nginx-proxy-manager          Docker container "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" managing Nginx proxy ho…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24")]),a._v("\nnginx/nginx-ingress               NGINX Ingress Controller "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" Kubernetes         "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v("\nprivatebin/nginx-fpm-alpine       PrivateBin running on an Nginx, php-fpm "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v(" Al…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nschmunk42/nginx-redirect          A very simple container to redirect HTTP tra…   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nblacklabelops/nginx               Dockerized Nginx Reverse Proxy Server.          "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v("                                      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("p",[a._v("根据是否是官方提供，可以将镜像分为两类。")]),a._v(" "),s("p",[a._v("一类是类似 "),s("code",[a._v("nginx")]),a._v(" 这样的镜像，被称为基础镜像或跟镜像。这些基础镜像由 Docker 公司创建、验证、支持、提供。这样的镜像往往使用单个单词作为名字。")]),a._v(" "),s("p",[a._v("还有一种类型，比如 "),s("code",[a._v("feiben/nginx")]),a._v(" 镜像，它是由 Docker Hub 的注册用户创建并维护的，往往带有用户名称前缀。可以通过前缀 "),s("code",[a._v("username/")]),a._v(" 来指定使用某个用户提供的镜像，比如 "),s("code",[a._v("feiben")]),a._v(" 用户。")]),a._v(" "),s("h3",{attrs:{id:"推送镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#推送镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 推送镜像")]),a._v(" "),s("p",[a._v("用户登录后可以通过 "),s("code",[a._v("docker push")]),a._v(" 命令来把自己的镜像推送到 Docker Hub，例如将 "),s("code",[a._v("nginx")]),a._v(" 镜像改成我们自己的镜像，然后推送到 Docker Hub。")]),a._v(" "),s("p",[a._v("首先通过 "),s("code",[a._v("docker pull nginx")]),a._v(" 将 "),s("code",[a._v("nginx")]),a._v(" 镜像下载到本地。")]),a._v(" "),s("p",[a._v("给 "),s("code",[a._v("nginx")]),a._v(" 添加标签 "),s("code",[a._v("docker tag nginx feiben/nginx:1.17.5")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nfeiben/nginx        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.17")]),a._v(".5              f949e7d76d63        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" weeks ago         126MB\nnginx               latest              f949e7d76d63        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" weeks ago         126MB\n")])])]),s("p",[a._v("将自己的镜像推送到 Docker Hub")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker push feiben/nginx:1.17.5\nThe push refers to repository "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("docker.io/feiben/nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n509a5ea4aeeb: Mounted from library/nginx\n3bb51901dfa3: Mounted from library/nginx\n2db44bce66cd: Mounted from library/nginx\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.17")]),a._v(".5: digest: sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76 size: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("948")]),a._v("\n")])])]),s("p",[a._v("稍等片刻，我们就可以搜索出推送的镜像了")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker search feiben\nNAME                DESCRIPTION         STARS               OFFICIAL            AUTOMATED\nfeiben/nginx                            "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),s("h3",{attrs:{id:"自动构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动构建","aria-hidden":"true"}},[a._v("#")]),a._v(" 自动构建")]),a._v(" "),s("p",[a._v("我们可以通过 Docker Hub 指定跟踪一个目标网站（支持 GitHub 或 BitBucket）上的项目，项目一旦有新的提交或者创建了新标签，将会触发 Docker Hub 自动构建镜像并推送到 Docker Hub中。")]),a._v(" "),s("p",[a._v("设置自动构建的步骤如下：")]),a._v(" "),s("ol",[s("li",[a._v("登录 Docker Hub")]),a._v(" "),s("li",[a._v("点击头像，选择 Account Setting 再选择 Linked Accounts 管理账号")]),a._v(" "),s("li",[a._v("在 Docker Hub 中新建或选择已有的仓库，在 Builds 选项卡中选择 Configure Automated Builds")]),a._v(" "),s("li",[a._v("选取一个目标网站中的项目（需要含 Dockerfile）和分支")]),a._v(" "),s("li",[a._v("指定 Dockerfile 的位置，并保存")])]),a._v(" "),s("p",[a._v("完成自动构建配置之后，指定的分支一旦提交代码就会触发自动构建，我们可以在仓库页面的 Timeline 选项卡中查看每次构建的状态。")]),a._v(" "),s("p",[a._v("除了 Docker Hub 的自动构建外，我们也可以使用 Travis CI 等持续集成工具来实现自动构建。")]),a._v(" "),s("h2",{attrs:{id:"私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 私有仓库")]),a._v(" "),s("p",[a._v("公司的项目一般不予许我们上传到 Docker Hub 这类的公共仓库中，所有学会创建一个私有仓库也是非常必要的。")]),a._v(" "),s("h3",{attrs:{id:"容器运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器运行","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器运行")]),a._v(" "),s("p",[a._v("我们可以通过获取官方的 "),s("code",[a._v("registry")]),a._v(" 镜像来运行。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker run -d -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(":5000 --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always --name registry registry\n")])])]),s("p",[a._v("这将使用官方提供的 "),s("code",[a._v("registry")]),a._v(" 镜像来启动私有仓库。默认情况下，仓库会被创建在容器的 "),s("code",[a._v("/var/lib/registry")]),a._v(" 目录下。我们可以通过 "),s("code",[a._v("-v")]),a._v(" 参数将镜像文件存放在本地的指定路径。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker run -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(":5000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -v /opt/data/registry:/var/lib/registry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" registry\n")])])]),s("p",[a._v("这时我们可以通过浏览器访问 "),s("code",[a._v("http://domain:5000/v2/_catalog")]),a._v(" 查看仓库是否启动成功。")]),a._v(" "),s("ul",[s("li",[a._v("其中 "),s("code",[a._v("domain")]),a._v(" 是你的域名或 ip 地址，下文中的 "),s("code",[a._v("domain")]),a._v(" 同理。")])]),a._v(" "),s("h3",{attrs:{id:"在私有仓库搜索、上传、下载镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在私有仓库搜索、上传、下载镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 在私有仓库搜索、上传、下载镜像")]),a._v(" "),s("h4",{attrs:{id:"上传镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 上传镜像")]),a._v(" "),s("p",[a._v("首先使用 "),s("code",[a._v("docker tag")]),a._v(" 将本地的 "),s("code",[a._v("nginx")]),a._v(" 镜像添加标签")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker tag nginx:latest domain/nginx:latest\n")])])]),s("p",[a._v("接下来就可以使用 "),s("code",[a._v("docker push")]),a._v(" 命令将镜像推送到我们的私有仓库中")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker push domain/nginx:latest\nThe push refers to repository "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("domain/nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nGet https://domain/v2/: EOF\n")])])]),s("p",[a._v("出现上面的提示时，说明推送失败了。因为 Docker 默认使用 HTTPS 的方式推送镜像。我们可以通过 Docker 的配置来取消这个限制。")]),a._v(" "),s("p",[a._v("对于 Linux 系统，我们可以在 "),s("code",[a._v("/etc/docker/deamon.json")]),a._v(" （"),s("code",[a._v("deamon.josn")]),a._v(" 文件不存在则新建该文件）添加下面的配置")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"insecure-registries"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"domain:5000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("对于桌面版，我们可以在 Docker 的设置 "),s("code",[a._v("Daemon")]),a._v(" 选项中的 "),s("code",[a._v("Insecure registries")]),a._v(" 中加上 "),s("code",[a._v("domain:5000")]),a._v("。")]),a._v(" "),s("p",[a._v("【注】如果仓库主机是远程服务器的话，需要将服务器与本地的 docker 配置进行修改")]),a._v(" "),s("p",[a._v("设置完成后再使用上面的命令进行推送。除了上面这种方式外，我们也可以将私有仓库的地址配置成支持 "),s("code",[a._v("HTTPS")]),a._v(" 访问的，本文就不作展开了。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker push domain:5000/nginx:latest\nThe push refers to repository "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("domain:5000/nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n509a5ea4aeeb: Pushed\n3bb51901dfa3: Pushed\n2db44bce66cd: Pushed\nlatest: digest: sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76 size: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("948")]),a._v("\n")])])]),s("p",[a._v("当看到上面的信息时，说明已经推送成功了。我们可以再次访问 "),s("code",[a._v("http://domain:5000/v2/_catalog")]),a._v(" 进行验证")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" http://domain:5000/v2/_catalog\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"repositories"')]),a._v(":"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nginx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("看到这个说明上传成功了。")]),a._v(" "),s("h4",{attrs:{id:"搜索镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 搜索镜像")]),a._v(" "),s("p",[a._v("搜索私有仓库的镜像并不能用 "),s("code",[a._v("docker search")]),a._v(" 命令, 只能通过 "),s("code",[a._v("http://domain:5000/v2/image_name/tags/list")]),a._v(" 查看指定镜像存在的 "),s("code",[a._v("tag")]),a._v(" 列表")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" domain:5000/v2/nginx/tags/list\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nginx"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tags"')]),a._v(":"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"latest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h4",{attrs:{id:"下载镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载镜像")]),a._v(" "),s("p",[a._v("首先我们通过 "),s("code",[a._v("docker rmi")]),a._v(" 将本地的镜像删除（取消标签）。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker rmi domain:5000/nginx\nUntagged: domain:5000/nginx:latest\nUntagged: domain:5000/nginx@sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76\n")])])]),s("p",[a._v("再使用 "),s("code",[a._v("docker images")]),a._v(" 确认 "),s("code",[a._v("domain:5000/nginx")]),a._v(" 这个镜像在本地不存在，接下来我们就可以从私有仓库进行下载。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ docker pull domain:5000/nginx:latest\n")])])]),s("p",[a._v("除了使用官方提供的 Registry，我们也可以使用 Nexus3.x 来创建仓库，关于如何使用 Nexus 版本的仓库将放到下一篇文章中。当然你也可以从 https://docker_practice.gitee.io/zh-cn/repository/nexus3_registry.html 学习。")])])}),[],!1,null,null,null);e.default=n.exports}}]);